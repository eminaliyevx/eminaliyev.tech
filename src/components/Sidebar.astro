---
import me from "@/assets/images/me.jpg";
import type { ISkill } from "@/interfaces";
import { Contentful } from "@/lib";
import { Picture } from "@astrojs/image/components";
import { Icon } from "astro-icon";
import Button from "./Button.astro";

const love = (
  await Contentful.getEntries<ISkill>({
    content_type: "skill",
    order: ["sys.updatedAt"],
    "fields.love": true,
  })
).items.map(({ fields }) => fields);
---

<aside
  aria-label="Sidebar"
  class="fixed left-0 top-0 z-40 h-full w-72 -translate-x-full bg-neutral-50 transition-transform dark:bg-neutral-900 lg:translate-x-0"
>
  <div class="scrollbar-y h-full overflow-y-auto px-4 py-8">
    <div
      class="mb-4 overflow-hidden rounded-full ring ring-emerald-500 ring-offset-2 ring-offset-neutral-50 dark:ring-yellow-500 dark:ring-offset-neutral-900"
    >
      <Picture
        src={me}
        alt="Emin Aliyev"
        widths={[640, 900]}
        sizes="(max-width: 640px) 100vw, 900px"
        formats={["webp", "webp"]}
        loading="eager"
        width={me.width}
        height={me.height}
        class="w-full"
      />
    </div>

    <div class="mb-4 flex flex-col">
      <h1 class="text-2xl font-semibold">Emin Aliyev</h1>
      <h2 class="text-lg">🧑🏻‍💻 Software Developer</h2>
    </div>

    <Button
      as="a"
      href="/CV.pdf"
      target="_blank"
      variant="outline"
      size="sm"
      fullWidth
      class="mb-4 gap-2 uppercase"
      download="CV.pdf"
    >
      <Icon name="file-cv" width="20" height="20" />
      <span>Download CV</span>
    </Button>

    <div class="mb-4 flex flex-col">
      <h2 class="font-medium">✅ Summary</h2>

      <figure>
        <blockquote
          cite="https://kelvindorsey.com/my-unmatched-perspicacity-coupled-with-my-sheer-indefatigability-makes-me-a-feared-opponent-in-any-realm-of-human-endeavor/"
          class="text-justify"
        >
          <p>
            My unmatched perspicacity coupled with my sheer indefatigability
            makes me a feared opponent in any realm of human endeavor.
          </p>
        </blockquote>

        <figcaption class="text-right">
          <a
            href="https://en.wikipedia.org/wiki/Emory_Tate"
            target="_blank"
            class="italic decoration-emerald-500 underline-offset-[5px] hover:underline dark:decoration-yellow-500"
            >Emory Tate</a
          >
        </figcaption>
      </figure>
    </div>

    <div class="mb-4 flex flex-col gap-2">
      <h2 class="font-medium">❤️‍🔥 Love</h2>

      <div class="grid grid-cols-4 gap-4">
        {
          love.map((item) => (
            <div>
              <Icon name={item.icon} width="48" height="48" />
            </div>
          ))
        }
      </div>
    </div>

    <div class="flex flex-col gap-2">
      <h2 class="font-medium">Contact</h2>

      <a
        href="mailto:eminaliyevx@gmail.com"
        class="flex items-center gap-2 decoration-emerald-500 underline-offset-[5px] hover:underline dark:decoration-yellow-500"
      >
        <Icon name="mail" width="24" height="24" />
        <span>eminaliyevx@gmail.com</span>
      </a>

      <a
        href="https://www.linkedin.com/in/emin-aliyev-17b806235/"
        target="_blank"
        class="flex items-center gap-2 decoration-emerald-500 underline-offset-[5px] hover:underline dark:decoration-yellow-500"
      >
        <Icon name="brand-linkedin" width="24" height="24" />
        <span>Emin Aliyev</span>
      </a>

      <a
        href="https://github.com/eminaliyevx"
        target="_blank"
        class="flex items-center gap-2 decoration-emerald-500 underline-offset-[5px] hover:underline dark:decoration-yellow-500"
      >
        <Icon name="brand-github" width="24" height="24" />
        <span>eminaliyevx</span>
      </a>
    </div>
  </div>
</aside>
